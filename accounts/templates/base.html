<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>{% block title %}ForumApp{% endblock %}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- Fontlar -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <!-- Tailwind Config -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: { 
              50: '#f0f9ff',
              100: '#e0f2fe', 
              200: '#bae6fd',
              300: '#7dd3fc',
              400: '#38bdf8',
              500: '#0ea5e9', 
              600: '#0284c7',
              700: '#0369a1',
              800: '#075985',
              900: '#0c4a6e'
            },
            secondary: { 
              50: '#f8fafc',
              100: '#f1f5f9',
              200: '#e2e8f0',
              300: '#cbd5e1',
              400: '#94a3b8',
              500: '#64748b', 
              600: '#475569',
              700: '#334155',
              800: '#1e293b',
              900: '#0f172a'
            },
            accent: { 
              50: '#eff6ff',
              100: '#dbeafe',
              200: '#bfdbfe',
              300: '#93c5fd',
              400: '#60a5fa',
              500: '#3b82f6', 
              600: '#2563eb',
              700: '#1d4ed8',
              800: '#1e40af',
              900: '#1e3a8a'
            },
            blue: {
              50: '#f0f9ff',
              100: '#e0f2fe',
              200: '#bae6fd',
              300: '#74bde0',
              400: '#4a8db7',
              500: '#3b7197',
              600: '#2c5a7a',
              700: '#1e3a52',
              800: '#152b3d',
              900: '#0f1f2e'
            }
          },
          fontFamily: { sans: ['Inter', 'sans-serif'] },
          animation: {
            'fade-in': 'fadeIn 0.3s ease-in-out',
            'slide-in': 'slideIn 0.3s ease-out',
            'slide-right': 'slideRight 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)',
            'pulse-glow': 'pulseGlow 2s ease-in-out infinite',
          },
          keyframes: {
            fadeIn: {
              '0%': { opacity: '0' },
              '100%': { opacity: '1' },
            },
            slideIn: {
              '0%': { transform: 'translateX(-100%)' },
              '100%': { transform: 'translateX(0)' },
            },
            slideRight: {
              '0%': { transform: 'translateX(0px)' },
              '100%': { transform: 'translateX(15px)' },
            },
            pulseGlow: {
              '0%': { boxShadow: '0 0 5px rgba(59, 113, 151, 0.3)' },
              '50%': { boxShadow: '0 0 20px rgba(59, 113, 151, 0.6)' },
              '100%': { boxShadow: '0 0 5px rgba(59, 113, 151, 0.3)' },
            }
          }
        }
      }
    }
  </script>
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
    /* Scrollbar stilleri */
    .custom-scrollbar {
      scrollbar-width: thin;
      scrollbar-color: rgba(59, 113, 151, 0.3) transparent;
    }
    
    .custom-scrollbar::-webkit-scrollbar {
      width: 6px;
    }
    
    .custom-scrollbar::-webkit-scrollbar-track {
      background: transparent;
    }
    
    .custom-scrollbar::-webkit-scrollbar-thumb {
      background: rgba(59, 113, 151, 0.3);
      border-radius: 3px;
    }
    
    .custom-scrollbar::-webkit-scrollbar-thumb:hover {
      background: rgba(59, 113, 151, 0.5);
    }

    /* Navbar link stilleri */
    .nav-link {
      position: relative;
      color: inherit;
      transition: all 0.3s ease;
    }
    .nav-link:after {
      content: '';
      position: absolute;
      width: 0;
      height: 2px;
      bottom: -2px;
      left: 0;
      background: linear-gradient(90deg, #3b7197, #74bde0);
      transition: width 0.3s ease;
    }
    .nav-link:hover:after,
    .nav-link.active:after {
      width: 100%;
    }
    
    /* Sidebar link temel stilleri */
    .sidebar-link {
      display: flex !important;
      align-items: center !important;
      padding: 12px 16px !important;
      margin: 2px 0 !important;
      border-radius: 12px !important;
      color: #475569 !important;
      text-decoration: none !important;
      position: relative !important;
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) !important;
      background: transparent !important;
      transform: translateX(0px) !important;
      will-change: transform, background-color, color, box-shadow !important;
    }
    
    /* Hover durumu */
    .sidebar-link:hover {
      transform: translateX(15px) !important;
      background: linear-gradient(135deg, rgba(59, 113, 151, 0.12), rgba(116, 189, 224, 0.12)) !important;
      color: #3b7197 !important;
      box-shadow: 0 6px 20px rgba(59, 113, 151, 0.2) !important;
      border-left: 4px solid #4a8db7 !important;
    }
    
    /* Focus durumu */
    .sidebar-link:focus {
      transform: translateX(15px) !important;
      background: linear-gradient(135deg, rgba(59, 113, 151, 0.12), rgba(116, 189, 224, 0.12)) !important;
      color: #3b7197 !important;
      box-shadow: 0 6px 20px rgba(59, 113, 151, 0.2) !important;
      outline: none !important;
    }
    
    /* Icon stilleri */
    .sidebar-link i {
      margin-right: 12px !important;
      width: 20px !important;
      text-align: center !important;
      transition: all 0.4s ease !important;
      font-size: 16px !important;
      display: inline-block !important;
    }
    
    /* Icon hover efekti */
    .sidebar-link:hover i {
      transform: scale(1.3) rotate(5deg) !important;
      color: #4a8db7 !important;
      filter: brightness(1.2) !important;
    }
    
    /* Text hover efekti */
    .sidebar-link:hover .sidebar-text {
      font-weight: 600 !important;
      color: #3b7197 !important;
    }
    
    /* Active state */
    .sidebar-link.active {
      background: linear-gradient(135deg, rgba(59, 113, 151, 0.15), rgba(116, 189, 224, 0.15)) !important;
      color: #3b7197 !important;
      transform: translateX(12px) !important;
      border-left: 4px solid #4a8db7 !important;
      font-weight: 600 !important;
    }
    
    /* Badge stilleri */
    .notification-badge {
      position: absolute;
      top: 8px;
      right: 8px;
      background: linear-gradient(135deg, #ef4444, #dc2626);
      color: white;
      font-size: 10px;
      font-weight: bold;
      padding: 2px 6px;
      border-radius: 10px;
      min-width: 18px;
      height: 18px;
      display: flex;
      align-items: center;
      justify-content: center;
      animation: pulse-glow 2s ease-in-out infinite;
    }
    
    /* Kategori toggle stilleri */
    .category-toggle {
      transition: all 0.3s ease;
      cursor: pointer;
      border-radius: 0.5rem;
      padding: 8px 12px;
    }
    
    .category-toggle:hover {
      background: rgba(74, 141, 183, 0.1);
      color: #3b7197;
      transform: translateX(5px);
    }
    
    .category-toggle i.fas.fa-chevron-down {
      transition: transform 0.3s ease;
    }
    
    .category-toggle.collapsed i.fas.fa-chevron-down {
      transform: rotate(-90deg);
    }
    
    .category-content {
      max-height: 1000px;
      overflow: hidden;
      transition: max-height 0.3s ease;
    }
    
    .category-content.collapsed {
      max-height: 0;
    }
    
    /* Sidebar daraltma stilleri */
    .sidebar.collapsed {
      width: 80px;
    }
    
    .sidebar.collapsed .sidebar-text {
      display: none;
    }
    
    .sidebar.collapsed .sidebar-link span {
      display: none;
    }
    
    .sidebar.collapsed .sidebar-link {
      justify-content: center;
      padding: 12px;
    }
    
    .sidebar.collapsed .category-toggle {
      display: none;
    }
    
    .sidebar.collapsed .category-content {
      display: none;
    }
    
    /* Overlay stilleri */
    .overlay {
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(4px);
    }

    .sidebar-close-btn {
      position: absolute;
      top: 16px;
      right: 16px;
      z-index: 50;
    }
    
    /* Stat item stilleri */
    .stat-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px 16px;
      border-radius: 8px;
      background: rgba(59, 113, 151, 0.05);
      margin: 4px 0;
      transition: all 0.3s ease;
    }
    
    .stat-item:hover {
      background: rgba(59, 113, 151, 0.1);
      transform: scale(1.02);
    }
    
    .stat-value {
      font-weight: 600;
      color: #3b7197;
    }
    
    /* Force hover states for touch devices */
    @media (hover: hover) {
      .sidebar-link:hover {
        transform: translateX(15px) !important;
        background: linear-gradient(135deg, rgba(59, 113, 151, 0.12), rgba(116, 189, 224, 0.12)) !important;
        color: #3b7197 !important;
        box-shadow: 0 6px 20px rgba(59, 113, 151, 0.2) !important;
      }
    }
    
    /* Gradient backgrounds */
    .gradient-bg {
      background: linear-gradient(135deg, #4a8db7 0%, #74bde0 100%);
    }
    
    .card-shadow {
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      transition: all 0.3s ease;
    }
    
    .card-shadow:hover {
      box-shadow: 0 10px 15px -3px rgba(59, 113, 151, 0.15), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
      transform: translateY(-2px);
    }
  </style>
</head>

<body class="bg-gradient-to-br from-slate-50 via-blue-50 to-sky-50 text-slate-800 font-sans flex flex-col min-h-screen">

  <!-- Mobile Sidebar Overlay -->
  <div id="sidebarOverlay" class="fixed inset-0 overlay z-30 md:hidden hidden"></div>

  <!-- Mobile Sidebar Toggle -->
  <button id="sidebarToggle" class="md:hidden fixed top-4 left-4 z-50 gradient-bg text-white p-3 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300">
    <i class="fas fa-bars text-lg"></i>
  </button>

  <!-- Sidebar Include -->
  {% include 'forum/sidebar.html' %}

  <!-- Main Content -->
  <div class="md:ml-64 flex-1 flex flex-col">

    <!-- Navbar -->
    <nav class="bg-white/95 backdrop-blur-md border-b border-blue-200/60 shadow-sm sticky top-0 z-20">
      <div class="container mx-auto px-6 py-4 flex items-center justify-between">
        <div class="flex items-center space-x-6">
          <a href="{% url 'home' %}" class="text-2xl font-bold text-transparent bg-clip-text gradient-bg flex items-center">
            <i class="fas fa-brain mr-3 text-blue-600"></i>
            AI Forum
          </a>
          <div class="hidden md:flex space-x-6">
            <a href="{% url 'topic_list' %}" class="nav-link text-slate-700 hover:text-blue-600 flex items-center">
              <i class="fas fa-list mr-2"></i>
              Tüm Konular
            </a>
            <a href="{% url 'create_topic' %}" class="nav-link text-slate-700 hover:text-blue-500 flex items-center">
              <i class="fas fa-plus mr-2"></i>
              Yeni Konu
            </a>
            <a href="{% url 'accounts:leaderboard' %}" class="nav-link text-slate-700 hover:text-blue-700 flex items-center">
              <i class="fas fa-trophy mr-2"></i>
              Lider Tablosu
            </a>
          </div>
        </div>

        <div class="flex items-center space-x-4">
          <form method="get" action="{% url 'search_topics' %}" class="relative">
            <input type="text" name="q" placeholder="Ara..." 
                   class="pl-10 pr-4 py-2 rounded-lg border border-blue-200 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 text-sm bg-white/90 backdrop-blur-sm transition-all duration-200">
            <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400"></i>
          </form>

          {% if request.user.is_authenticated %}
            <a href="{% url 'notifications' %}" class="relative text-slate-700 hover:text-blue-600 transition-colors">
              <i class="far fa-bell text-xl"></i>
              {% if unread_count %}
                <span class="absolute -top-1 -right-1 bg-gradient-to-r from-blue-500 to-sky-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center animate-pulse">
                  {{ unread_count }}
                </span>
              {% endif %}
            </a>

            <a href="{% url 'accounts:user_profile' username=request.user.username %}" class="flex items-center space-x-2 hover:opacity-80 transition-opacity">
              <div class="w-8 h-8 rounded-full gradient-bg text-white flex items-center justify-center uppercase font-semibold shadow-md">
                {{ request.user.username|first }}
              </div>
            </a>
          {% else %}
            <a href="{% url 'accounts:login' %}" class="text-slate-700 hover:text-blue-600 transition-colors">Giriş Yap</a>
            <a href="{% url 'accounts:signup' %}" class="gradient-bg hover:shadow-lg text-white px-4 py-2 rounded-lg text-sm transition-all duration-300 font-medium">
              Kayıt Ol
            </a>
          {% endif %}
        </div>
      </div>
    </nav>

    <!-- Flash Messages -->
    {% if messages %}
    <div class="container mx-auto px-6 py-4 space-y-3">
      {% for message in messages %}
        <div class="flex items-center p-4 rounded-lg text-sm font-medium card-shadow animate-fade-in
                    {% if message.tags == 'success' %}bg-gradient-to-r from-emerald-50 to-green-50 text-emerald-800 border-l-4 border-emerald-500{% endif %}
                    {% if message.tags == 'error'   %}bg-gradient-to-r from-red-50 to-rose-50 text-red-800 border-l-4 border-red-500{% endif %}
                    {% if message.tags == 'info'    %}bg-gradient-to-r from-blue-50 to-sky-50 text-blue-800 border-l-4 border-blue-500{% endif %}">
          <i class="fas 
            {% if message.tags == 'success' %}fa-check-circle text-emerald-500{% endif %}
            {% if message.tags == 'error'   %}fa-exclamation-circle text-red-500{% endif %}
            {% if message.tags == 'info'    %}fa-info-circle text-blue-500{% endif %} mr-3 text-lg"></i>
          {{ message }}
        </div>
      {% endfor %}
    </div>
    {% endif %}

    <!-- Page Content -->
    <main class="container mx-auto px-6 py-8 flex-1">
      {% block content %}{% endblock %}
    </main>

    <!-- Footer -->
    <footer class="bg-white/95 backdrop-blur-md border-t border-slate-200/60 py-6">
      <div class="container mx-auto px-6 text-center text-slate-600 text-sm">
        <div class="flex items-center justify-center space-x-2 mb-2">
          <i class="fas fa-brain text-blue-600"></i>
          <span class="font-medium">© {% now "Y" %} AI Forum</span>
        </div>
        <p>Yapay zeka ve teknoloji tartışmalarının merkezi</p>
      </div>
    </footer>
  </div>

  <script>
    // DOM elementleri
    const sidebarToggle = document.getElementById('sidebarToggle');
    const sidebar = document.getElementById('sidebar');
    const overlay = document.getElementById('sidebarOverlay');
    const sidebarCollapseBtn = document.getElementById('sidebarCollapseBtn');
    const sidebarCloseBtn = document.getElementById('sidebarCloseBtn');
    
    // Console log for debugging
    console.log('🚀 Forum Base Loaded - Modern Sidebar System');
    
    // Sidebar açma/kapama fonksiyonları
    function openSidebar() {
      if (sidebar && overlay) {
        sidebar.classList.remove('-translate-x-full');
        overlay.classList.remove('hidden');
        document.body.style.overflow = 'hidden';
      }
    }
    
    function closeSidebar() {
      if (sidebar && overlay) {
        sidebar.classList.add('-translate-x-full');
        overlay.classList.add('hidden');
        document.body.style.overflow = '';
      }
    }
    
    function toggleSidebar() {
      if (sidebar) {
        if (sidebar.classList.contains('-translate-x-full')) {
          openSidebar();
        } else {
          closeSidebar();
        }
      }
    }
    
    // Desktop sidebar daraltma
    function toggleSidebarCollapse() {
      if (sidebar && sidebarCollapseBtn) {
        sidebar.classList.toggle('collapsed');
        const icon = sidebarCollapseBtn.querySelector('i');
        if (icon) {
          if (sidebar.classList.contains('collapsed')) {
            icon.className = 'fas fa-chevron-right text-blue-600';
          } else {
            icon.className = 'fas fa-chevron-left text-blue-600';
          }
        }
      }
    }
    
    // Kategori açma/kapama
    function toggleCategory(button, targetId) {
      const target = document.getElementById(targetId);
      const icon = button.querySelector('i.fa-chevron-down');
      
      if (target && icon) {
        button.classList.toggle('collapsed');
        target.classList.toggle('collapsed');
        
        if (target.classList.contains('collapsed')) {
          icon.style.transform = 'rotate(-90deg)';
        } else {
          icon.style.transform = 'rotate(0deg)';
        }
      }
    }
    
    // Sidebar hover efektleri
    function initializeSidebarHoverEffects() {
      console.log('🎯 Modern Sidebar hover efektleri başlatılıyor...');
      
      const sidebarLinks = document.querySelectorAll('.sidebar-link');
      console.log(`📋 ${sidebarLinks.length} sidebar link bulundu`);
      
      sidebarLinks.forEach((link, index) => {
        // Her link için hover event'leri ekle
        link.addEventListener('mouseenter', function(e) {
          console.log(`🖱️ Link ${index + 1} hover başladı:`, this.textContent.trim());
          
          // Force CSS properties with JavaScript
          this.style.setProperty('transform', 'translateX(15px)', 'important');
          this.style.setProperty('background', 'linear-gradient(135deg, rgba(59, 113, 151, 0.12), rgba(116, 189, 224, 0.12))', 'important');
          this.style.setProperty('color', '#3b7197', 'important');
          this.style.setProperty('box-shadow', '0 6px 20px rgba(59, 113, 151, 0.2)', 'important');
          this.style.setProperty('border-left', '4px solid #4a8db7', 'important');
          
          // Icon efekti
          const icon = this.querySelector('i');
          if (icon) {
            icon.style.setProperty('transform', 'scale(1.3) rotate(5deg)', 'important');
            icon.style.setProperty('color', '#4a8db7', 'important');
            console.log(`🎨 Icon ${index + 1} efekt uygulandı`);
          }
          
          // Text efekti
          const text = this.querySelector('.sidebar-text');
          if (text) {
            text.style.setProperty('font-weight', '600', 'important');
            text.style.setProperty('color', '#3b7197', 'important');
            console.log(`📝 Text ${index + 1} efekt uygulandı`);
          }
        });
        
        link.addEventListener('mouseleave', function(e) {
          console.log(`🖱️ Link ${index + 1} hover bitti`);
          
          // Reset all styles
          if (!this.classList.contains('active')) {
            this.style.removeProperty('transform');
            this.style.removeProperty('background');
            this.style.removeProperty('color');
            this.style.removeProperty('box-shadow');
            this.style.removeProperty('border-left');
            
            // Reset icon
            const icon = this.querySelector('i');
            if (icon) {
              icon.style.removeProperty('transform');
              icon.style.removeProperty('color');
            }
            
            // Reset text
            const text = this.querySelector('.sidebar-text');
            if (text) {
              text.style.removeProperty('font-weight');
              text.style.removeProperty('color');
            }
          }
        });
        
        // Click event ile test
        link.addEventListener('click', function(e) {
          console.log(`🔗 Link ${index + 1} tıklandı:`, this.href);
        });
        
        // Focus events
        link.addEventListener('focus', function(e) {
          console.log(`🎯 Link ${index + 1} focus aldı`);
          this.dispatchEvent(new Event('mouseenter'));
        });
        
        link.addEventListener('blur', function(e) {
          console.log(`🎯 Link ${index + 1} focus kaybetti`);
          this.dispatchEvent(new Event('mouseleave'));
        });
      });
      
      // Stat items hover effects
      const statItems = document.querySelectorAll('.stat-item');
      statItems.forEach((item, index) => {
        item.addEventListener('mouseenter', function() {
          this.style.transform = 'scale(1.02)';
          this.style.background = 'rgba(59, 113, 151, 0.1)';
        });
        
        item.addEventListener('mouseleave', function() {
          this.style.transform = 'scale(1)';
          this.style.background = 'rgba(59, 113, 151, 0.05)';
        });
      });
      
      console.log('✅ Modern Sidebar hover efektleri başarıyla yüklendi!');
    }
    
    // Event listener'ları ekle
    if (sidebarToggle) {
      sidebarToggle.addEventListener('click', (e) => {
        e.preventDefault();
        e.stopPropagation();
        toggleSidebar();
      });
    }
    
    if (sidebarCloseBtn) {
      sidebarCloseBtn.addEventListener('click', (e) => {
        e.preventDefault();
        e.stopPropagation();
        closeSidebar();
      });
    }
    
    if (overlay) {
      overlay.addEventListener('click', closeSidebar);
    }
    
    if (sidebarCollapseBtn) {
      sidebarCollapseBtn.addEventListener('click', (e) => {
        e.preventDefault();
        toggleSidebarCollapse();
      });
    }
    
    // Kategori toggle butonları
    document.querySelectorAll('.category-toggle').forEach(button => {
      button.addEventListener('click', function(e) {
        e.preventDefault();
        const targetId = this.getAttribute('data-target');
        if (targetId) {
          toggleCategory(this, targetId);
        }
      });
    });
    
    // Dışarı tıklama ile kapatma (sadece mobil)
    document.addEventListener('click', function(event) {
      if (window.innerWidth < 768 && sidebar && overlay) {
        const isClickInsideSidebar = sidebar.contains(event.target);
        const isClickOnToggle = sidebarToggle && sidebarToggle.contains(event.target);
        const isClickOnCloseBtn = sidebarCloseBtn && sidebarCloseBtn.contains(event.target);
        
        if (!isClickInsideSidebar && !isClickOnToggle && !isClickOnCloseBtn && !sidebar.classList.contains('-translate-x-full')) {
          closeSidebar();
        }
      }
    });
    
    // Pencere boyutu değişimini dinle
    window.addEventListener('resize', function() {
      if (window.innerWidth >= 768 && overlay) {
        overlay.classList.add('hidden');
        document.body.style.overflow = '';
      }
    });
    
    // ESC tuşu ile kapatma
    document.addEventListener('keydown', function(event) {
      if (event.key === 'Escape' && sidebar && !sidebar.classList.contains('-translate-x-full')) {
        closeSidebar();
      }
    });
    
    // Scrollbar smooth scroll behavior
    function initSmoothScroll() {
      const scrollableContent = sidebar?.querySelector('.custom-scrollbar');
      if (scrollableContent) {
        scrollableContent.style.scrollBehavior = 'smooth';
        console.log('✅ Sidebar smooth scroll aktif');
      }
    }
    
    // Real-time notification updates (mock)
    function updateNotificationBadges() {
      const badges = document.querySelectorAll('.notification-badge');
      badges.forEach(badge => {
        // Simulated real-time updates
        const currentValue = parseInt(badge.textContent);
        if (Math.random() > 0.95) { // %5 chance to update
          badge.textContent = currentValue + 1;
          badge.style.animation = 'none';
          setTimeout(() => {
            badge.style.animation = 'pulse-glow 2s ease-in-out infinite';
          }, 10);
        }
      });
    }
    
    // DOM yüklendiğinde hover efektlerini başlat
    document.addEventListener('DOMContentLoaded', function() {
      console.log('🌟 DOM yüklendi - Modern Sidebar başlatılıyor...');
      initializeSidebarHoverEffects();
      initSmoothScroll();
      
      // Start notification updates
      setInterval(updateNotificationBadges, 30000); // 30 saniyede bir kontrol
      
      // Performance monitoring
      let mouseTestCount = 0;
      document.addEventListener('mousemove', function(e) {
        mouseTestCount++;
        if (mouseTestCount % 200 === 0) {
          console.log(`🖱️ Mouse performansı: (${e.clientX}, ${e.clientY}) - ${mouseTestCount} hareket`);
        }
      });
    });
    
    // Sayfa yüklendiğinde de çalıştır (backup)
    window.addEventListener('load', function() {
      console.log('🚀 Sayfa tamamen yüklendi - Backup sistem çalıştırılıyor...');
      setTimeout(() => {
        initializeSidebarHoverEffects();
        initSmoothScroll();
      }, 100);
    });
    
    // Keyboard shortcuts
    document.addEventListener('keydown', function(e) {
      // Ctrl + B: Toggle sidebar
      if (e.ctrlKey && e.key === 'b') {
        e.preventDefault();
        if (window.innerwidth >= 768) {
          toggleSidebarCollapse();
        } else {
          toggleSidebar();
        }
        console.log('⌨️ Sidebar klavye kısayolu kullanıldı');
      }
      
      // Ctrl + H: Hover test
      if (e.ctrlKey && e.key === 'h') {
        e.preventDefault();
        console.log('🔥 Hover test başlatıldı!');
        const testLink = document.querySelector('.sidebar-link');
        if (testLink) {
          testLink.style.border = '2px solid red';
          testLink.dispatchEvent(new Event('mouseenter'));
          setTimeout(() => {
            testLink.dispatchEvent(new Event('mouseleave'));
            testLink.style.border = '';
          }, 2000);
        }
      }
    });
    
    // Focus management for accessibility
    function manageFocus() {
      const focusableElements = sidebar?.querySelectorAll('a, button, [tabindex]:not([tabindex="-1"])');
      if (focusableElements) {
        focusableElements.forEach((el, index) => {
          el.addEventListener('keydown', function(e) {
            if (e.key === 'ArrowDown') {
              e.preventDefault();
              const nextIndex = (index + 1) % focusableElements.length;
              focusableElements[nextIndex].focus();
            } else if (e.key === 'ArrowUp') {
              e.preventDefault();
              const prevIndex = (index - 1 + focusableElements.length) % focusableElements.length;
              focusableElements[prevIndex].focus();
            }
          });
        });
        console.log('♿ Accessibility focus management aktif');
      }
    }
    
    // Initialize focus management
    setTimeout(manageFocus, 500);
    
    console.log('✨ Modern Forum Sidebar System tamamen yüklendi!');
    console.log('📝 Klavye kısayolları: Ctrl+B (sidebar), Ctrl+H (hover test)');
    console.log('🎯 Özellikler: Scroll, Hover, Focus, Notifications, Accessibility');
  </script>
</body>
</html>